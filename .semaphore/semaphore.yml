version: v1.0
name: hypotonic
agent:
  machine:
    type: e1-standard-4
    os_image: ubuntu1804

blocks:
  - name: test-3.6
    dependencies: []
    task:
      agent:
        machine:
          type: e1-standard-2
          os_image: ubuntu1804
        containers:
          - name: main
            image: semaphoreci/python:3.6.11
      prologue:
        commands:
          - checkout
      jobs:
        - name: run
          commands:
            - pip3 install poetry
            - poetry install
            - poetry run python -m unittest --verbose
  - name: test-3.7
    dependencies: []
    task:
      agent:
        machine:
          type: e1-standard-2
          os_image: ubuntu1804
        containers:
          - name: main
            image: semaphoreci/python:3.7.8
      prologue:
        commands:
          - checkout
      jobs:
        - name: run
          commands:
            - pip3 install poetry
            - poetry install
            - poetry run python -m unittest --verbose
  - name: test-3.8
    dependencies: []
    task:
      agent:
        machine:
          type: e1-standard-2
          os_image: ubuntu1804
        containers:
          - name: main
            image: semaphoreci/python:3.8.5
      prologue:
        commands:
          - checkout
      jobs:
        - name: run
          commands:
            - pip3 install poetry
            - poetry install
            - poetry run python -m unittest --verbose